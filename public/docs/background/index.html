<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="">
    <meta name="author" content="">

    <title>gb</title>

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

    
    <link href="/css/jumbotron-narrow.css" rel="stylesheet">

  </head>

  <body>
    <div class="container">
      <div class="header clearfix">
        <nav>
          <ul class="nav nav-pills pull-right">
            <li role="presentation" class="active"><a href="/">Home</a></li>
            <li role="presentation"><a href="/about">About</a></li>
            <li role="presentation"><a href="/docs/install">Installation</a></li>
            <li role="presentation"><a href="/docs/usage">Usage</a></li>
            <li role="presentation"><a href="/faq">FAQ</a></li>
            <li role="presentation"><a href="https://github.com/constabulary/gb">Contribute</a></li>
          </ul>
        </nav>
      </div>




<h1 id="about-gb:b0476fd92f83c4d5358b679e38a0aca3">About <code>gb</code></h1>

<p><code>gb</code> is a proof of concept replacement build tool for the <a href="https://golang.org">Go programming language</a>.</p>

<p>I gave a talk about <code>gb</code> and the rational for its creation at GDG Berlin in April 2015, <a href="https://www.youtube.com/watch?v=c3dW80eO88I">video</a> and <a href="http://go-talks.appspot.com/github.com/davecheney/presentations/reproducible-builds.slide#1">slides</a>.</p>

<h2 id="project-based:b0476fd92f83c4d5358b679e38a0aca3">Project based</h2>

<p><code>gb</code> operates on the concept of a project. A project has the following properties:</p>

<ul>
<li>A project is the consumer of your own source code, and possibly dependencies that your code consumes; nothing consumes the code from a project. Another way of thinking about it is, a project is where package <code>main</code> is.</li>
<li>A project is conceptually a <code>$GOPATH</code> workspace dedicated to your project&rsquo;s code.</li>
<li>A project supports multiple locations for source code, at the moment <code>src/</code> for your source code, and <code>vendor/src/</code> for third party code that you have copied, cloned, forked, or otherwise included in the project.</li>
<li>The code that represents an <code>import</code> path is controlled by the project, by virtue of being present in one of the source code directories in the project.</li>
</ul>

<h2 id="installation:b0476fd92f83c4d5358b679e38a0aca3">Installation</h2>

<pre><code>go get github.com/constabulary/gb/...
</code></pre>

<h2 id="getting-started:b0476fd92f83c4d5358b679e38a0aca3">Getting started</h2>

<p>See the <a href="getting-started.md">getting started</a> document.</p>

<h2 id="commands:b0476fd92f83c4d5358b679e38a0aca3">Commands</h2>

<p><code>gb</code> is the main command. It supports subcommands, of which there are currently two:</p>

<ul>
<li><code>build</code> - which takes one or more import paths, ie <code>gb build github.com/constabulary/gb/cmd/gb</code>, if executed inside <code>$PROJECT/src/some/path/</code>, <code>gb build</code> will build that path.</li>
<li><code>test</code> - behaves identically to <code>gb build</code>, but runs tests.</li>
</ul>

<h2 id="project-root-auto-detection:b0476fd92f83c4d5358b679e38a0aca3">Project root auto detection</h2>

<p>A <code>gb</code> project is defined as any directory that contains a <code>src/</code> subdirectory. <code>gb</code> automatically detects the root of the project by looking at the current working directory and walking backwards until it finds a directory called <code>src/</code>.</p>

<h2 id="arguments:b0476fd92f83c4d5358b679e38a0aca3">Arguments</h2>

<p>Arguments to <code>gb</code> subcommands are package import paths or globs relative to the project <code>src/</code> directory</p>

<ul>
<li><code>gb build github.com/a/b</code> - builds <code>github.com/a/b</code></li>
<li><code>gb build github.com/a/b/...</code> - builds <code>github.com/a/b</code> and all packages below it</li>
<li><code>gb build .../cmd/...</code> - builds anything that matches <code>.*/cmd/.*</code></li>
<li><code>gb build</code> - shorthand for <code>go build ...</code>, depending on the current working directory this will be the entire project, or a subtree.</li>
</ul>

<p>Other subcommands, like <code>test</code>, <code>vendor</code>, etc follow the same rule.</p>

<p><em>note</em>: only import paths within the <code>src/</code> directory will match, it is not possible to build source from the <code>vendor/src/</code> directory; it will be built if needed by virtue of being imported by a package in the <code>src/</code> directory.</p>

<h2 id="incremental-compilation:b0476fd92f83c4d5358b679e38a0aca3">Incremental compilation</h2>

<p>By default <code>gb</code> always performs incremental compilation and caches the results in <code>$PROJECT/pkg/</code>. See the Flags section for options to alter this behaviour.</p>

<h2 id="flags:b0476fd92f83c4d5358b679e38a0aca3">Flags</h2>

<p>The following flags are supported by <code>gb</code>. Note that these are flags to subcommands, so must come <em>after</em> the subcommand.
- <code>-R</code> - sets the base of the project root search path from the current working directory to the value supplied. Effectively <code>gb</code> changes working directory to this path before searching for the project root.
- <code>-v</code> - increases verbosity, effectively lowering the output level from INFO to DEBUG.
- <code>-q</code> - decreases verbosity, effectively raising the output level to ERROR. In a successful build, no output will be displayed.
- <code>-goroot</code> - alters the path to the go toolchain in use, eg <code>gb build -goroot=$HOME/go1.4</code>.
- <code>-goos</code>, <code>-goarch</code> - analogous to <code>env GOOS=... GOARCH=... gb</code>.
- <code>-f</code> - ignore cached packages if present, new packages built will overwrite any cached packages. This effectively disables incremental compilation.
- <code>-F</code> - do not cache packages, cached packages will still be used for incremental compilation, <code>-f -F</code> is advised to disable the package caching system.</p>

<h2 id="plugins:b0476fd92f83c4d5358b679e38a0aca3">Plugins</h2>

<p><code>gb</code> supports git style plugins, anything in the path that starts with <code>gb-</code> is considered a plugin. Plugins are executed from the main <code>gb</code> tool. At the moment there are two plugins shipped with <code>gb</code>.</p>

<ul>
<li><code>env</code> - analogous to <code>go env</code>, useful for debugging the environment passed to <code>gb</code> plugins, tranditionally all environment variables in this set begin with <code>GB_</code>.</li>
<li><code>vendor</code> - is a simple wrapper around <code>go get</code> to allow easy bootstrapping of a project by fetching dependencies in to the <code>vendor/src/</code> directory.</li>
</ul>


      <footer class="footer">
  <ul>
    
      <div class="row">
        <ul>
          
          <div class="col-md-4">
          <p> design </p>
                <ul>
                
                    <li hugo-nav="/about/"><a href="http://localhost:1313/about/"> About gb </a> </li>
                
                </ul>
          </div>
          
          <div class="col-md-4">
          <p> docs </p>
                <ul>
                
                    <li hugo-nav="/docs/install/"><a href="http://localhost:1313/docs/install/"> Installation </a> </li>
                
                    <li hugo-nav="/docs/project/"><a href="http://localhost:1313/docs/project/"> Project </a> </li>
                
                    <li hugo-nav="/docs/usage/"><a href="http://localhost:1313/docs/usage/"> Usage </a> </li>
                
                </ul>
          </div>
          
          <div class="col-md-4">
          <p> plugins </p>
                <ul>
                
                    <li hugo-nav="/plugins/gb-env/"><a href="http://localhost:1313/plugins/gb-env/"> gb-env </a> </li>
                
                    <li hugo-nav="/plugins/gb-vendor/"><a href="http://localhost:1313/plugins/gb-vendor/"> gb-vendor </a> </li>
                
                </ul>
          </div>
          
        </ul>
      </div>
    
      <div class="row">
        <ul>
          
        </ul>
      </div>
    
  </ul>
        <p class="text-center"><em>gb</em> is developed by the <a href="https://github.com/constabulary">Constabulary</a> | This website is proudly built with <a href="https://gohugo.io/">hugo</a></p>
      </footer>

    </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18618646-5', 'auto');
  ga('send', 'pageview');

</script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>

